<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>30 ta Lug ªat ‚Äî Flashcard App</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827ee;
      --card:#1f2937;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --accent-2:#38bdf8;
      --danger:#ef4444;
      --yellow:#fbbf24;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background: radial-gradient(1200px 700px at 80% -10%, #1e293b, transparent 60%),
                  radial-gradient(900px 600px at -10% 10%, #0b3b4a, transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100svh; display:grid; place-items:center; padding:18px;
    }
    .app{ width:min(980px, 100%); display:grid; gap:16px; }
    .topbar{ display:grid; gap:10px; grid-template-columns:1fr auto; align-items:center; background:var(--panel); border:1px solid #233; border-radius:16px; padding:14px 16px; backdrop-filter: blur(6px);}    
    .title{font-weight:700; letter-spacing:.2px}
    .controls{display:flex; flex-wrap:wrap; gap:8px}
    button, .btn{
      background:#0b1220; color:var(--text); border:1px solid #223244;
      padding:10px 12px; border-radius:12px; cursor:pointer; font-weight:600;
      transition:.15s transform ease, .15s background;
    }
    button:hover{transform:translateY(-1px)}
    button:active{transform:translateY(0)}
    button[disabled]{opacity:.5; cursor:not-allowed}
    .primary{background:linear-gradient(135deg, #0ea5e9, #22c55e); border:none}
    .danger{background:linear-gradient(135deg, #ef4444, #f59e0b); border:none}
    .info{background:#0b213a; border-color:#21476b}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap}
    .toolbar input[type="text"]{background:#0b1220; color:var(--text); border:1px solid #223244; outline:none; padding:10px 12px; border-radius:12px; min-width:200px;}
    .toggle{display:flex; align-items:center; gap:8px}
    .card{ user-select:none; background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), var(--card); border:1px solid #2a3342; border-radius:20px; padding:24px; min-height:220px; display:grid; place-items:center; text-align:center; position:relative; overflow:hidden; box-shadow: 0 10px 30px rgba(0,0,0,.35); cursor:pointer; }
    .card .label{position:absolute; top:12px; right:12px; font-size:12px; color:var(--muted)}
    .card .big{font-size:clamp(26px, 6vw, 44px); font-weight:800; letter-spacing:.3px}
    .card .small{margin-top:8px; color:var(--muted)}
    .hint{position:absolute; bottom:10px; left:0; right:0; text-align:center; color:var(--muted); font-size:12px}
    .bottom{ display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap }
    .progress{flex:1; height:10px; background:#0b1220; border:1px solid #223244; border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent), var(--accent-2)); width:0}
    .stack{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .stack .mini{ background:#0b1220; border:1px dashed #2a3b4a; border-radius:12px; padding:10px 12px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; font-size:13px }
    .mini b{color:var(--text)}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace; font-size:12px; background:#0b1220; border:1px solid #223244; padding:2px 6px; border-radius:6px}
    .note{font-size:13px; color:var(--muted)}
    @media (max-width:720px){ .stack{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div>
        <div class="title">BEGINNER MATERIALS ‚Ä¢ 30 ta lug ªat uchun flashcard</div>
        <div class="note">Kartani bosib tarjimani ko‚Äòring ¬∑ <span class="kbd">‚Üê/‚Üí</span> yoki <span class="kbd">A/D</span> ‚Äî oldinga/ortga ¬∑ <span class="kbd">Space</span> ‚Äî ochish</div>
      </div>
      <div class="controls">
        <button id="speak" class="info">üîä O‚Äòqib ber (US)</button>
        <button id="voiceToggle" class="primary">Rejim: American</button>
        <button id="autoPlay" class="danger">‚ñ∂Ô∏è Avto-o‚Äòqitish</button>
        <button id="shuffle" class="primary">üîÄ Shuffle</button>
        <button id="reset" class="danger">‚ôªÔ∏è Reset</button>
        <button id="mode" class="primary">Rejim: Aralash</button>
      </div>
    </div>
    <div class="toolbar">
      <input id="search" type="text" placeholder="Qidirish: inglizcha yoki o‚Äòzbekcha..." />
      <label class="toggle"><input id="frontUZ" type="checkbox"> Oldida o‚Äòzbekcha chiqsin</label>
      <label class="toggle"><input id="autoFlip" type="checkbox"> Auto-flip (2s)</label>
      <label class="toggle"><input id="learnedOnly" type="checkbox"> Faqat o‚Äòrganilmagan</label>
    </div>
    <div id="card" class="card" tabindex="0">
      <span class="label" id="idx"></span>
      <div>
        <div class="big" id="front">Loading‚Ä¶</div>
        <div class="small" id="back" style="display:none"></div>
      </div>
      <div class="hint">Bosib tarjimani ko‚Äòring</div>
    </div>
    <div class="bottom">
      <div class="progress"><i id="bar"></i></div>
      <div class="stack">
        <div class="mini">Holat: <b id="status">0 / 30</b></div>
        <div class="mini">Belgilangan (o‚Äòrganildi): <b id="learnedCount">0</b></div>
      </div>
      <div class="controls">
        <button id="prev">‚¨ÖÔ∏è Oldingi</button>
        <button id="flip">üîÅ Och / Yop</button>
        <button id="next">Keyingi ‚û°Ô∏è</button>
        <button id="mark">‚úÖ O‚Äòrganildi</button>
      </div>
    </div>
  </div>
  <script>
   const data = [
  {en:"allow", uz:"ruxsat bermoq; imkoniyat bermoq"},
  {en:"announce", uz:"e‚Äôlon qilmoq; ma‚Äôlum qilmoq"},
  {en:"beside", uz:"yonma-yon"},
  {en:"challenge", uz:"qiyinchilik; mushkul ish"},
  {en:"claim", uz:"da‚Äôvo qilmoq"},
  {en:"condition", uz:"ahvol; holat"},
  {en:"contribute", uz:"hissa qo‚Äòshmoq"},
  {en:"difference", uz:"farq; tafovut"},
  {en:"divide", uz:"taqsimlamoq; bo‚Äòlmoq"},
  {en:"expert", uz:"ekspert; mutaxassis; usta"},
  {en:"famous", uz:"mashhur; taniqli"},
  {en:"force", uz:"kuch; qudrat"},
  {en:"harm", uz:"zarar"},
  {en:"lay", uz:"yoqtizmoq"},
  {en:"peace", uz:"tinchlik"},
  {en:"prince", uz:"shahzoda"},
  {en:"protect", uz:"himoya qilmoq; asramoq"},
  {en:"sense", uz:"his qilmoq"},
  {en:"sudden", uz:"to‚Äòsatdan"},
  {en:"therefore", uz:"shuning uchun"}
];



    let order = [...data.keys()];
    let idx=0; let showBack=false; let learned=new Set(JSON.parse(localStorage.getItem('flash.learned')||'[]'));

    shuffleArray(order);
    let sequentialMode = false;

    let currentVoice = 'en-US';
    let autoPlaying = false;

    const elCard=document.getElementById('card');
    const elFront=document.getElementById('front');
    const elBack=document.getElementById('back');
    const elIdx=document.getElementById('idx');
    const elBar=document.getElementById('bar');
    const elStatus=document.getElementById('status');
    const elLearnedCount=document.getElementById('learnedCount');
    const elSearch=document.getElementById('search');
    const frontUZ=document.getElementById('frontUZ');
    const autoFlip=document.getElementById('autoFlip');
    const learnedOnly=document.getElementById('learnedOnly');

    function progress(){ elStatus.textContent=`${idx+1} / ${order.length}`; elBar.style.width=((idx+1)/order.length*100).toFixed(2)+"%"; elLearnedCount.textContent=learned.size; elIdx.textContent=`#${idx+1}`; document.getElementById('mark').textContent=learned.has(order[idx])?'‚ùå O‚Äòrganilgan emas':'‚úÖ O‚Äòrganildi'; }
    function current(){ return data[order[idx]]; }
    function render(){ const item=current(); const frontText=frontUZ.checked?item.uz:item.en; const backText=frontUZ.checked?item.en:item.uz; elFront.textContent=frontText; elBack.textContent=backText; elBack.style.display=showBack?'block':'none'; progress(); }
    function flip(force){ if(typeof force==='boolean') showBack=force; else showBack=!showBack; render(); }
    function next(){ if(idx<order.length-1){idx++; showBack=false; render();} }
    function prev(){ if(idx>0){idx--; showBack=false; render();} }
    function shuffleArray(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } }
    function rebuildOrder(){ const q=elSearch.value.trim().toLowerCase(); const pool=data.map((x,i)=>({i,x})).filter(({x})=>true); const filtered=q?pool.filter(({x})=> x.en.toLowerCase().includes(q)||x.uz.toLowerCase().includes(q) ):pool; order=filtered.map(o=>o.i); idx=0; showBack=false; render(); }

    document.getElementById('flip').onclick=()=>flip();
    document.getElementById('next').onclick=()=>next();
    document.getElementById('prev').onclick=()=>prev();
    document.getElementById('shuffle').onclick=()=>{shuffleArray(order); idx=0; showBack=false; render();};
    document.getElementById('reset').onclick=()=>{order=[...data.keys()]; if(!sequentialMode) shuffleArray(order); idx=0; showBack=false; learned.clear(); localStorage.removeItem('flash.learned'); render();};
    document.getElementById('mark').onclick=()=>{const key=order[idx]; if(learned.has(key)) learned.delete(key); else learned.add(key); localStorage.setItem('flash.learned',JSON.stringify([...learned])); progress();};

    document.getElementById('mode').onclick=()=>{
      sequentialMode = !sequentialMode;
      if(sequentialMode){
        order=[...data.keys()];
        document.getElementById('mode').textContent='Rejim: Ketma-ket';
      } else {
        order=[...data.keys()];
        shuffleArray(order);
        document.getElementById('mode').textContent='Rejim: Aralash';
      }
      idx=0; showBack=false; render();
    };

    document.getElementById('voiceToggle').onclick=()=>{
      if(currentVoice==='en-US'){
        currentVoice='en-GB';
        document.getElementById('voiceToggle').textContent='Rejim: British';
        document.getElementById('speak').textContent='üîä O‚Äòqib ber (UK)';
      } else {
        currentVoice='en-US';
        document.getElementById('voiceToggle').textContent='Rejim: American';
        document.getElementById('speak').textContent='üîä O‚Äòqib ber (US)';
      }
    };

    elSearch.addEventListener('input',rebuildOrder);
    frontUZ.addEventListener('change',()=>{showBack=false; render();});
    learnedOnly.addEventListener('change',rebuildOrder);

    let autoTimer=null; autoFlip.addEventListener('change',()=>{ clearInterval(autoTimer); if(autoFlip.checked){ autoTimer=setInterval(()=>flip(true),2000);} });

    elCard.addEventListener('click',()=>flip());
    document.addEventListener('keydown',(e)=>{ if(e.code==='Space'){e.preventDefault();flip();} if(e.key==='ArrowRight'||e.key==='d'||e.key==='D'){next();} if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A'){prev();} });

    const speakBtn=document.getElementById('speak');
    speakBtn.addEventListener('click',()=>{ speakWord(current().en, currentVoice); });

    function speakWord(word, lang){
      return new Promise(resolve=>{
        const u=new SpeechSynthesisUtterance(word);
        u.lang=lang;
        u.onend=resolve;
        window.speechSynthesis.speak(u);
      });
    }

    async function autoPlayFunc(){
      autoPlaying = true;
      document.getElementById('autoPlay').textContent='‚èπÔ∏è To‚Äòxtatish';
      for(let i=idx;i<order.length && autoPlaying;i++){
        const item=data[order[i]];
        for(let j=0;j<5 && autoPlaying;j++){
          await speakWord(item.en, currentVoice);
          await speakWord(item.uz, 'uz-UZ');
        }
        if(autoPlaying) next();
      }
      autoPlaying=false;
      document.getElementById('autoPlay').textContent='‚ñ∂Ô∏è Avto-o‚Äòqitish';
    }

    document.getElementById('autoPlay').onclick=()=>{
      if(autoPlaying){
        autoPlaying=false;
        window.speechSynthesis.cancel();
        document.getElementById('autoPlay').textContent='‚ñ∂Ô∏è Avto-o‚Äòqitish';
      } else {
        autoPlayFunc();
      }
    };

    render();
  </script>
</body>
</html>